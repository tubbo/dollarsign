{"version":3,"sources":["nquery.js"],"names":["NQuery","scope","selector","document","options","events","callback","elements","forEach","map","event","each","element","addEventListener","removeEventListener","delete","dispatchEvent","updates","Object","keys","rule","style","attribute","value","parents","parent","name","result","classList","includes","add","remove","nodes","getElementsBySelector","push","fn","prototype","$"],"mappings":"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","file":"nquery.js","sourcesContent":["/**\n * The NQuery object represents a collection of DOM elements grouped by the given\n * `selector`. Wraps basic browser functionality into a more consistent\n * and concise API.\n *\n * @author Tom Scott <tubbo@psychedeli.ca>\n */\nclass NQuery {\n  /**\n   * @constructor\n   */\n  constructor(scope, selector) {\n    this.document = scope;\n    this.selector = options.selector;\n    this.events = {};\n  }\n\n  /**\n   * All elements matching the given `selector`.\n   *\n   * @return {Array<HTMLNode>}\n   */\n  get elements() {\n    var nodes = [];\n\n    if (typeof this.document.forEach === 'array') {\n      this.document.forEach(function(scope) {\n        scope.getElementsBySelector(this.selector).forEach(function(element) {\n          nodes.push(element);\n        });\n      });\n    } else {\n      nodes = this.document.getElementsBySelector(this.selector);\n    }\n\n    return nodes;\n  }\n\n  /**\n   * Iterate over every element with the given callback function.\n   *\n   * @param {function} callback - Function to call on each iteration.\n   * @return {NQuery} this object\n   */\n  each(callback) {\n    this.elements.forEach(callback);\n    return this;\n  }\n\n  /**\n   * Iterate over every element with the given callback function and\n   * return a new array with the return result of each callback.\n   *\n   * @param {function} callback - Function to call on each iteration.\n   *                              Each return value becomes part of the Array returned.\n   * @return {Array}\n   */\n  map(callback) {\n    return this.elements.map(callback);\n  }\n\n  /**\n   * Bind an event to the elements in this selection.\n   *\n   * @param {string} event - Name of the event to be bound.\n   * @param {function} callback - Callback function to be executed when\n   * event fires.\n   * @return {NQuery} this object\n   */\n  on(event, callback) {\n    this.each(element => element.addEventListener(event, callback));\n    this.events[event] = callback;\n    return this;\n  }\n\n  /**\n   * Unbind an event from the elements in this selection.\n   *\n   * @param {string} event - Name of the event to be unbound.\n   * @return {NQuery} this object\n   */\n  off(event) {\n    this.each(element => element.removeEventListener(event));\n    this.events.delete(event);\n    return this;\n  }\n\n  /**\n   * Trigger an event on all elements in this object.\n   *\n   * @param {string} event - Name of the event to trigger.\n   * @return {NQuery} this object\n   */\n  fire(event) {\n    return this.each((element) => element.dispatchEvent(event));\n  }\n\n  /**\n   * Alter CSS for all elements in the selection.\n   *\n   * @param {object} updates - Hash of CSS rules to apply to each element.\n   * @return {NQuery} this object\n   */\n  css(updates = {}) {\n    Object.keys(updates).forEach(function(rule) {\n      this.each(function(element) {\n        element.style[rule] = updates[rule];\n      });\n    });\n    return this;\n  }\n\n  /**\n   * Alter attributes for all elements in the selection.\n   *\n   * @param {object} updates - Hash of attribute updates to apply to each element.\n   * @return {NQuery} this object\n   */\n  attr(updates = {}) {\n    Object.keys(updates).forEach(function(attribute) {\n      this.each(element => element[attribute] = value);\n    });\n    return this;\n  }\n\n  /**\n   * Return an NQuery object for DOM elements undernerath this selector.\n   *\n   * @param {string} selector - CSS selector to search for.\n   * @return {NQuery} New NQuery object representing selection.\n   */\n  find(selector) {\n    return new NQuery(this.elements, selector);\n  }\n\n  /**\n   * Return an NQuery object for DOM elements above this selector.\n   *\n   * @param {string} selector - CSS Selector to search for.\n   * @return {NQuery} New NQuery object representing selection.\n   */\n  closest(selector) {\n    var parents = this.map((element) => element.parent);\n    return new NQuery(parents, selector);\n  }\n\n  /**\n   * Test whether the given class is associated with these elements.\n   *\n   * @param {string} name\n   * @return {boolean} `true` if class is applied to given element, `false` otherwise.\n   */\n  hasClass(name) {\n    var result = true;\n    this.each(function(element) {\n      if (result) {\n        result = element.classList.includes(name);\n      }\n    });\n    return result;\n  }\n\n  /**\n   * Add class name to elements in query.\n   *\n   * @param {string} name - Name of the class to add.\n   * @return {NQuery} this object.\n   */\n  addClass(name) {\n    this.each(function(element) {\n      element.classList.add(name);\n    });\n    return this;\n  }\n\n  /**\n   * Remove class name from elements in query.\n   *\n   * @param {string} name - Name of the class to remove.\n   * @return {NQuery} this object.\n   */\n  removeClass(name) {\n    this.each(function(element) {\n      element.classList.remove(name);\n    });\n    return this;\n  }\n}\n\n/**\n * The plugin interface for NQuery. Add new methods to the NQuery object\n * with `NQuery.fn.myNewMethod = function(args) { ... }`\n *\n * @function NQuery.fn\n */\nNQuery.fn = NQuery.prototype;\n\n/**\n * Create a new NQuery object using the given selector and scope. If no\n * scope is provided, use the `document` to get the global page scope.\n *\n * @function $\n * @param {string} selector - Query to run for selecting elements.\n * @param {HTMLNode} scope - DOM to manipulate. Default: `document`.\n * @return {NQuery} the object created from selector and scope.\n * @author Tom Scott <tubbo@psychedeli.ca>\n */\nfunction $(selector, scope = document) {\n  return new NQuery(scope, selector);\n}\n"]}